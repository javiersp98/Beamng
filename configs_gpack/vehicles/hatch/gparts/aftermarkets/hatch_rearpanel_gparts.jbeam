{
"hatch_rearpanel_aft1": {
    "information":{
        "authors":"BeamNG",
        "name":"Aftermarket Rear Panel",
        "value":600,
    },

    "slotType" : "hatch_rearpanel",

    "flexbodies": [
        ["mesh", "[group]:", "nonFlexMaterials"],
        ["hatch_rearpanel_aft1", ["hatch_rearpanel"]],
        {"deformGroup":"taillight_L_break", "deformMaterialBase":"hatch_lights", "deformMaterialDamaged":"hatch_lights_dmg"},
        ["hatch_taillight_L_aft1", ["hatch_rearpanel"],[]{"deformSound":"event:>Destruction>Vehicle>Glass>glassbreaksound3", "deformVolume":0.5}],
        {"deformGroup":"taillight_R_break", "deformMaterialBase":"hatch_lights", "deformMaterialDamaged":"hatch_lights_dmg"},
        ["hatch_taillight_R_aft1", ["hatch_rearpanel"],[]{"deformSound":"event:>Destruction>Vehicle>Glass>glassbreaksound4", "deformVolume":0.5}],
        {"deformGroup":""},
    ],
    "props": [
        ["func", "mesh", "idRef:", "idX:", "idY:", "baseRotation", "rotation", "translation", "min", "max", "offset", "multiplier"]
        {
            "lightInnerAngle":0
            "lightOuterAngle":80
            "lightBrightness":0.1
            "lightRange":30
            "lightColor":{"r":235, "g":235, "b":255, "a":255}
            "lightAttenuation":{"x":0, "y":1, "z":1}
            "lightCastShadows":false
            "flareName":"vehicleReverseLightFlare"
            "flareScale":0.2
            "cookieName":"art/special/BNG_light_cookie_headlight.png"
            "texSize":512
            "shadowSoftness":0.5
        },
        //reverse lights
        ["reverse", "SPOTLIGHT", "rp1rr", "rp1r", "rp2rr", {"x":0,"y":0,"z":0},   {"x":0,"y":0,"z":0}, {"x":0,"y":0,"z":0}, 0, 0, 0, 1, {"baseTranslation":{"x":0.45, "y":0.6, "z":0},  "deformGroup":"taillight_R_break"}],
        ["reverse", "SPOTLIGHT", "rp1ll", "rp1l", "rp2ll", {"x":180,"y":0,"z":0}, {"x":0,"y":0,"z":0}, {"x":0,"y":0,"z":0}, 0, 0, 0, 1, {"baseTranslation":{"x":0.45, "y":0.6, "z":0}, "deformGroup":"taillight_L_break"}],
        //taillights
        {
            "lightInnerAngle":0
            "lightOuterAngle":140
            "lightBrightness":0.1
            "lightRange":20
            "lightColor":{"r":255, "g":50, "b":0, "a":255}
            "lightAttenuation":{"x":0, "y":1, "z":1}
            "lightCastShadows":false
            "flareName":"vehicleBrakeLightFlare"
            "flareScale":0.35
        },
        ["brake",       "SPOTLIGHT", "rp1rr", "rp1r", "rp2rr", {"x":0,"y":0,"z":0},     {"x":0,"y":0,"z":0}, {"x":0,"y":0,"z":0}, 0, 0, 0, 1, {"baseTranslation":{"x":0.8, "y":0.3, "z":0}, "deformGroup":"taillight_R_break"}],
        ["brake",       "SPOTLIGHT", "rp1ll", "rp1l", "rp2ll", {"x":180,"y":0,"z":0},   {"x":0,"y":0,"z":0}, {"x":0,"y":0,"z":0}, 0, 0, 0, 1, {"baseTranslation":{"x":0.8, "y":0.3, "z":0},  "deformGroup":"taillight_L_break"}],
        ["lowhighbeam", "SPOTLIGHT", "rp1rr", "rp1r", "rp2rr", {"x":0,"y":0,"z":0},     {"x":0,"y":0,"z":0}, {"x":0,"y":0,"z":0}, 0, 0, 0, 1, {"baseTranslation":{"x":0.8, "y":0.3, "z":0}, "deformGroup":"taillight_R_break"}],
        ["lowhighbeam", "SPOTLIGHT", "rp1ll", "rp1l", "rp2ll", {"x":180,"y":0,"z":0},   {"x":0,"y":0,"z":0}, {"x":0,"y":0,"z":0}, 0, 0, 0, 1, {"baseTranslation":{"x":0.8, "y":0.3, "z":0},  "deformGroup":"taillight_L_break"}],
        //corner
        ["signal_R",    "SPOTLIGHT", "rp1rr", "rp1r", "rp2rr", {"x":0,"y":0,"z":45},    {"x":0,"y":0,"z":0}, {"x":0,"y":0,"z":0}, 0, 0, 0, 1, {"baseTranslation":{"x":0.0, "y":0.3, "z":0}, "deformGroup":"signal_RR_break"}],
        ["signal_L",    "SPOTLIGHT", "rp1ll", "rp1l", "rp2ll", {"x":180,"y":0,"z":-45}, {"x":0,"y":0,"z":0}, {"x":0,"y":0,"z":0}, 0, 0, 0, 1, {"baseTranslation":{"x":0.0, "y":0.3, "z":0},  "deformGroup":"signal_RL_break"}],
        ["lowhighbeam", "SPOTLIGHT", "rp1rr", "rp1r", "rp2rr", {"x":0,"y":0,"z":45},    {"x":0,"y":0,"z":0}, {"x":0,"y":0,"z":0}, 0, 0, 0, 1, {"baseTranslation":{"x":0.0, "y":0.3, "z":0}, "deformGroup":"signal_RR_break"}],
        ["lowhighbeam", "SPOTLIGHT", "rp1ll", "rp1l", "rp2ll", {"x":180,"y":0,"z":-45}, {"x":0,"y":0,"z":0}, {"x":0,"y":0,"z":0}, 0, 0, 0, 1, {"baseTranslation":{"x":0.0, "y":0.3, "z":0},  "deformGroup":"signal_RL_break"}],
     ],
    "nodes": [
        ["id", "posX", "posY", "posZ"],
        //--REAR PANEL--
        {"collision":true},
        {"nodeMaterial":"|NM_PLASTIC"},
        {"frictionCoef":0.8},
        {"nodeWeight":1.2},
        {"group":"hatch_rearpanel"},
        {"selfCollision":true},
        ["rp1rr",-0.77, 1.81, 0.50],
        ["rp1r", -0.31, 1.84, 0.50],
        ["rp1l",  0.31, 1.84, 0.50],
        ["rp1ll", 0.77, 1.81, 0.50],
        ["rp2rr",-0.77, 1.76, 0.70],
        ["rp2r", -0.31, 1.79, 0.70],
        ["rp2l",  0.31, 1.79, 0.70],
        ["rp2ll", 0.77, 1.76, 0.70],
        ["rp3rr",-0.79, 1.69, 0.50],
        ["rp3",0.0, 1.65, 0.50{"collision":false,"selfCollision":false}],
        ["rp3ll", 0.79, 1.69, 0.50],
        {"group":""},
    ],
    "beams": [
          ["id1:", "id2:"],
          {"beamType":"|NORMAL", "beamLongBound":1.0, "beamShortBound":1.0},
          //--REAR PANEL--
          {"beamSpring":601000,"beamDamp":50},
          {"beamDeform":12000,"beamStrength":"FLT_MAX"},
          {"deformationTriggerRatio":0.025},
          {"disableTriangleBreaking":true},
          //rear panel main shape
          ["rp1rr","rp1r"],
          ["rp1r","rp1l"],
          ["rp1l","rp1ll"],
          ["rp2rr","rp2r"],
          ["rp2r","rp2l"],
          ["rp2l","rp2ll"],
          ["rp1rr","rp3rr"],
          ["rp1ll","rp3ll"],
          ["rp2rr","rp3rr"],
          ["rp2ll","rp3ll"],
          {"deformGroup":"signal_RR_break"},
          ["rp1rr","rp2rr",{"deformationTriggerRatio":0.15}],
          {"deformGroup":"taillight_R_break"},
          ["rp1r","rp2r"],
          {"deformGroup":"taillight_L_break"},
          ["rp1l","rp2l"],
          {"deformGroup":"signal_RL_break"},
          ["rp1ll","rp2ll",{"deformationTriggerRatio":0.15}],
          //crossing
          {"beamDeform":6000,"beamStrength":"FLT_MAX"},
          {"deformGroup":"taillight_R_break"},
          ["rp1rr","rp2r"],
          ["rp1r","rp2rr"],
          {"deformGroup":""},
          ["rp1r","rp2l"],
          ["rp1l","rp2r"],
          {"deformGroup":"taillight_L_break"},
          ["rp1l","rp2ll"],
          ["rp1ll","rp2l"],
          {"deformGroup":""},
          {"beamDeform":3000,"beamStrength":"FLT_MAX"},
          //rigidifier
          {"deformationTriggerRatio":0.15}
          {"deformGroup":"signal_RR_break"},
          ["rp1rr","rp3"],
          ["rp2rr","rp3"],
          ["rp3rr","rp3"],
          {"deformationTriggerRatio":0.025}
          {"deformGroup":"taillight_R_break"},
          ["rp1r","rp3"],
          ["rp2r","rp3"],
          {"deformGroup":"taillight_L_break"},
          ["rp1l","rp3"],
          ["rp2l","rp3"],
          {"deformationTriggerRatio":0.15}
          {"deformGroup":"signal_RL_break"},
          ["rp1ll","rp3"],
          ["rp2ll","rp3"],
          ["rp3ll","rp3"],
          //rigid corners
          {"beamSpring":401000,"beamDamp":50},
          {"deformGroup":"signal_RR_break"},
          ["rp2r","rp3rr"],
          ["rp1r","rp3rr"],
          {"deformGroup":"signal_RL_break"},
          ["rp2l","rp3ll"],
          ["rp1l","rp3ll"],
          {"deformGroup":""},
          //attach
          {"beamDeform":5000,"beamStrength":25000},
          {"breakGroup":"rearpanel_R"},
          //r
          {"deformationTriggerRatio":0.15}
          {"deformGroup":"signal_RR_break"},
          ["rp1rr","q7r"],
          ["rp2rr","q7r"],
          ["rp3rr","q7r"],
          ["rp2rr","q3r"],
          {"deformationTriggerRatio":0.025}
          {"deformGroup":"taillight_R_break"},
          ["rp1r","q7r"],
          ["rp2r","q7r"],
          ["rp2r","q3r"],
          ["rp1r","r4r"],
          ["rp2r","r4r"],
          {"breakGroup":"rearpanel_L"},
          //l
          {"deformationTriggerRatio":0.15}
          {"deformGroup":"signal_RL_break"},
          ["rp1ll","q7l"],
          ["rp2ll","q7l"],
          ["rp3ll","q7l"],
          ["rp2ll","q3l"],
          {"deformationTriggerRatio":0.025}
          {"deformGroup":"taillight_L_break"},
          ["rp1l","q7l"],
          ["rp2l","q7l"],
          ["rp2l","q3l"],
          ["rp1l","r4l"],
          ["rp2l","r4l"],
          {"deformGroup":""},
          {"breakGroup":""},
          //rear panel support beams
          {"beamType":"|SUPPORT", "beamLongBound":4},
          {"beamSpring":501000,"beamDamp":10},
          {"beamDeform":10000,"beamStrength":200000},
          ["rp1rr","r4r"],
          ["rp1ll","r4l"],
          ["rp3rr","r3r"],
          ["rp3ll","r3l"],
          ["rp1rr","r2r"],
          ["rp1ll","r2l"],
          ["rp1r","r4r"],
          ["rp1l","r4l"],
          ["rp2r","r4r"],
          ["rp2l","r4l"],
          ["rp2r","r3r"],
          ["rp2l","r3l"],
          //inter part triangle breaking triggers
          {"beamType":"|SUPPORT", "beamLongBound":2},
          {"beamSpring":0,"beamDamp":0},
          {"beamDeform":1000,"beamStrength":1000},
          {"breakGroup":"rearpanel_tailgate"},
          //["rp1rr","t3rr"],
          //["rp1ll","t3ll"],
          {"breakGroup":"rearpanel_bumper"},
          //["rp2rr","rb1rr"],
          //["rp2ll","rb1ll"],
          {"breakGroup":""},
          {"disableTriangleBreaking":false},
          {"beamPrecompression":1, "beamType":"|NORMAL", "beamLongBound":1.0, "beamShortBound":1.0},
    ],
    "triangles": [
            ["id1:","id2:","id3:"],
            //rear panel
            {"dragCoef":4},
            {"groundModel":"plastic"},
            {"group":"hatch_rearpanel"},
            ["rp2ll","rp3ll","rp1ll"],
            ["rp2ll","rp1ll","rp1l"],
            ["rp2ll","rp1l","rp2l"],
            ["rp2l","rp1l","rp1r"],
            ["rp2l","rp1r","rp2r"],
            ["rp2r","rp1r","rp1rr"],
            ["rp2r","rp1rr","rp2rr"],
            ["rp2rr","rp1rr","rp3rr"],

            {"dragCoef":0},
            //bridge gap
            //{"optional":true}
            //{"breakGroup":"rearpanel_tailgate"}
            //["t3r","rp2r","rp2rr"],
            //["t3r","rp2rr","t3rr"],
            //["t3l","rp2r","t3r"],
            //["t3l","rp2l","rp2r"],
            //["t3l","rp2ll","rp2l"],
            //["t3ll","rp2ll","t3l"],
            //{"breakGroup":"rearpanel_bumper"}
            //["rp1ll","rb1ll","rp1l"],
            //["rb1ll","rb1l","rp1l"],
            //["rb1rr","rp1rr","rp1r"],
            //["rb1r", "rb1rr","rp1r"],
            //["rp1l", "rb1l","rp1r"],
            //["rb1l", "rb1r","rp1r"],
            //
            //["rb3ll", "rb1ll","rp1ll"],
            //["rb3ll", "rp1ll","rp3ll"],
            //
            //["rb1rr","rb3rr","rp1rr"],
            //["rp1rr","rb3rr","rp3rr"],
            //{"optional":false}
            //{"breakGroup":""}
            {"group":""},
    ],
},
}